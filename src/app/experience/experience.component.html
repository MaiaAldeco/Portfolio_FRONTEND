<app-navbar></app-navbar>
<section class="space" id="experience" [ngsReveal]="config1reveal">
    <div class="container-fluid mt-md-4 py-5">
        <div class="row justify-content-md-center">
            <div class="col-md-5">
                <button *ngIf="isLogged && isAdmin" (click)="open(content)" class="btn btn-md btn-outline-primary"><fa-icon [icon]="faUser" transform="shrink-0 left-4"></fa-icon>New Experience</button>
                <h3 class="exp-text">experiencia</h3>
                <ul *ngFor="let exp of experiencias">
                    <li class="li-text">
                        <b>{{exp.puesto}}.</b> {{exp.nombre}}
                        {{exp.fechaFin!=null?'('+exp.fechaInicio +'/'+ exp.fechaFin+').': '(' + exp.fechaInicio +').'}}
                        {{exp.descripcion!=null?exp.descripcion+'.':exp.descripcion}}
                        <div>          
                            <fa-icon *ngIf="isLogged" (click)="openDetailsExp(contentDetailsExp, exp)" style="color:#0DCAF0; cursor:pointer"
                                [icon]="faSearch" class="fa-1x fa-fw" transform="shrink-0 right-4"></fa-icon>
                            <fa-icon *ngIf="isLogged && isAdmin" (click)="openEditExp(contentEditExp, exp)" style="color:#F5B907; cursor:pointer"
                                [icon]="faPenToSquare" transform="shrink-0 right-7" class="fa-1x fa-fw"></fa-icon>
                            <fa-icon *ngIf="isLogged && isAdmin" (click)="openDeleteExp(contentDeleteExp, exp)" style="color:#C02E3C; cursor:pointer" [icon]="faTrash"
                                transform="shrink-0 right-9" class="fa-1x"></fa-icon>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-md-5">
                    <button *ngIf="isLogged && isAdmin" (click)="open(contentEst)" class="btn btn-md btn-outline-primary">
                        <fa-icon [icon]="faUser" transform="shrink-0 left-4"></fa-icon>New Study
                    </button>
                <h3 class="exp-text">estudios</h3>
                <ul *ngFor="let estudio of estudios">
                    <li class="li-text">
                        <b>{{estudio.curso}}.</b> {{estudio.lugar}}
                        {{estudio.fechaFin!=null?'('+estudio.fechaInicio +'/'+ estudio.fechaFin+').': '(' +
                        estudio.fechaInicio +').'}}
                        <div>
                            <fa-icon *ngIf="isLogged" (click)="openDetailsEs(contentDetailsEs, estudio)" style="color:#0DCAF0; cursor:pointer"
                                [icon]="faSearch" class="fa-1x fa-fw" transform="shrink-0 right-4"></fa-icon>
                            <fa-icon *ngIf="isLogged && isAdmin" (click)="openEditStudy(contentEditEst, estudio)" style="color:#F5B907; cursor:pointer"
                                [icon]="faPenToSquare" transform="shrink-0 right-7" class="fa-1x fa-fw"></fa-icon>
                            <fa-icon *ngIf="isLogged && isAdmin" (click)="openDeleteStudy(contentDeleteEst, estudio)" style="color:#C02E3C; cursor:pointer" [icon]="faTrash"
                                transform="shrink-0 right-9" class="fa-1x"></fa-icon>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
<!-- ---------------------------------------- ADD NEW STUDY --------------------------------------------------- -->
<ng-template #contentEst let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Nuevo Estudio</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #estudio="ngForm" (ngSubmit)="onSubmitEstudio(estudio)" novalidate>
            <div class="form-group">
                <label for="lugar">Instituto</label>
                <div class="input-group">
                    <input type="text" id="lugar" name="lugar" class="form-control" required ngModel>
                </div>
                <label for="curso">Curso</label>
                <div class="input-group">
                    <input type="text" id="curso" name="curso" class="form-control" required ngModel>
                </div>
                <label for="fechaInicio">Fecha Inicio</label>
                <div class="input-group">
                    <input type="date" id="fechaInicio" name="fechaInicio" class="form-control" required ngModel>
                </div>
                <label for="fechaFin">Fecha Fin (opcional)</label>
                <div class="input-group">
                    <input type="date" id="fechaFin" name="fechaFin" class="form-control" required ngModel>
                </div>
            </div>
            <div class="border text-center">
                <button data-dismiss="modal" class="btnContent">Submit</button>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- ADD NEW EXP --------------------------------------------------- -->
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Nueva Experiencia</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #experiencia="ngForm" (ngSubmit)="onSubmitExperiencia(experiencia)" novalidate>
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <div class="input-group">
                    <input type="text" id="nombre" name="nombre" class="form-control" required ngModel>
                </div>
                <label for="puesto">Puesto</label>
                <div class="input-group">
                    <input type="text" name="puesto" class="form-control" required ngModel>
                </div>
                <label for="descripcion">Descripción</label>
                <div class="input-group">
                    <input type="text" id="descripcion" name="descripcion" class="form-control" required ngModel>
                </div>
                <label for="fechaInicio" >Fecha Inicio</label>
                <div class="input-group">
                    <input type="date" id="fechaInicio" name="fechaInicio" class="form-control" required ngModel>
                </div>
                <label for="fechaFin">Fecha Fin (opcional)</label>
                <div class="input-group">
                    <input type="date" id="fechaFin" name="fechaFin" class="form-control" required ngModel>
                </div>
            </div>
            <div class="border text-center">
                <button data-dismiss="modal" class="btnContent">Submit</button>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- DETAILS EXP --------------------------------------------------- -->
<ng-template #contentDetailsExp let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Ver Experiencia</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label>Nombre</label>
                <div class="input-group">
                    <input id="nameExp" name="nameExp" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Puesto</label>
                <div class="input-group">
                    <input id="puestoExp" name="puestoExp" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Descripción</label>
                <div class="input-group">
                    <input id="descExp" name="descExp" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Fecha Inicio</label>
                <div class="input-group">
                    <input id="fechaInicioExp" name="fechaInicioExp" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Fecha Fin</label>
                <div class="input-group">
                    <input id="fechaFinExp" name="fechaFinExp" class="form-control" readonly>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- DETAILS STUDY --------------------------------------------------- -->
<ng-template #contentDetailsEs let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Ver Estudio</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="form-group">
                <label>Instituto</label>
                <div class="input-group">
                    <input id="nameEs" name="nameEs" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Curso</label>
                <div class="input-group">
                    <input id="cursoEs" name="cursoEs" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Fecha Inicio</label>
                <div class="input-group">
                    <input id="fechaIniEs" name="fechaIniEs" class="form-control" readonly>
                </div>
            </div>
            <div class="form-group">
                <label>Fecha Fin</label>
                <div class="input-group">
                    <input id="fechaFinEs" name="fechaFinEs" class="form-control" readonly>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- UPDATE STUDY --------------------------------------------------- -->
<ng-template #contentEditEst let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Actualizar Estudio</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="editFormStudy" novalidate>
            <div class="form-group">
                <label for="id">Id</label>
                <div class="input-group">
                    <input type="text" formControlName="id" class="form-control" required readonly>
                </div>
                <label for="lugar">Instituto</label>
                <div class="input-group">
                    <input type="text" formControlName="lugar" class="form-control" required>
                </div>
                <label for="curso">Curso</label>
                <div class="input-group">
                    <input type="text" formControlName="curso" class="form-control" required>
                </div>
                <label for="fechaInicio">Fecha Inicio</label>
                <div class="input-group">
                    <input type="date" formControlName="fechaInicio" class="form-control" required>
                </div>
                <label for="fechaFin">Fecha Fin</label>
                <div class="input-group">
                    <input type="date" formControlName="fechaFin" class="form-control" required>
                </div>
            </div>
            <div class="border text-center">
                <button (click)="onSaveEstudio()" data-dismiss="modal" class="btnContent">Guardar</button>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- UPDATE EXP --------------------------------------------------- -->
<ng-template #contentEditExp let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Actualizar Experiencia</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="editFormExp">
            <div class="form-group">
                <label for="id">Id</label>
                <div class="input-group">
                    <input type="text" formControlName="id" class="form-control" required readonly>
                </div>
                <label for="nombre">Nombre</label>
                <div class="input-group">
                    <input type="text" formControlName="nombre" class="form-control">
                </div>
                <label for="puesto">Puesto</label>
                <div class="input-group">
                    <input type="text" formControlName="puesto" class="form-control">
                </div>
                <label for="descripcion">Descripción</label>
                <div class="input-group">
                    <input type="text" formControlName="descripcion" class="form-control">
                </div>
                <label for="fechaInicio">Fecha Inicio</label>
                <div class="input-group">
                    <input type="date" formControlName="fechaInicio" class="form-control">
                </div>
                <label for="fechaFin">Fecha Fin</label>
                <div class="input-group">
                    <input type="date" formControlName="fechaFin" class="form-control">
                </div>
            </div>
            <div class="border text-center">
                <button (click)="onSaveExperience()" data-dismiss="modal" class="btnContent">Guardar</button>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>
<!-- ---------------------------------------- DELETE EXP --------------------------------------------------- -->
<ng-template #contentDeleteExp let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Eliminar Experiencia</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <h2>Los datos no se podrán recuperar. Desea continuar?</h2>
      <div class="border text-center"> 
        <button (click)="onDeleteExp()" data-dismiss="modal" class="btn btn-danger">Eliminar Experiencia</button> 
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-dark" (click)="modal.close('Save click')">Close</button>
    </div>
  </ng-template>
  <!-- ---------------------------------------- DELETE STUDY --------------------------------------------------- -->
<ng-template #contentDeleteEst let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Eliminar Estudio</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <h2>Los datos no se podrán recuperar. Desea continuar?</h2>
      <div class="border text-center"> 
        <button (click)="onDeleteStudy()" data-dismiss="modal" class="btn btn-danger">Eliminar Estudio</button> 
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-dark" (click)="modal.close('Save click')">Close</button>
    </div>
  </ng-template>